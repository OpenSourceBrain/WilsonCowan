<Lems>

    <Target component="sim1" />

    <!-- Include core NeuroML2 ComponentType definitions -->
    <Include file="Cells.xml" />
    <Include file="Networks.xml" />
    <Include file="Simulation.xml" />

    <Include file="WilsonCowanDimensions.xml" />

    <wilsonCowanCell id="E" tau="1ms" R0="0.1mHz" />
    <wilsonCowanCell id="I" tau="1ms" R0="0.05mHz"/>

    <!--Dummy synapse which emits no  current. Used as presynaptic endpoint for analog synaptic connection.-->
    <silentSynapse id="silent1"/>

    <rateSynapse id="rs" />

    <network id="net1">
        <population id="ePop" component="E" size="1" />
        <population id="iPop" component="I" size="1" />

        <continuousProjection id ="w_ee" presynapticPopulation="ePop" postsynapticPopulation="ePop">
            <continuousConnectionInstanceW id="0" preCell="../ePop[0]" postCell="../ePop[0]" preComponent="silent1" postComponent="rs" weight="10"/>
        </continuousProjection>

        <continuousProjection id ="w_ei" presynapticPopulation="ePop" postsynapticPopulation="iPop">
            <continuousConnectionInstanceW id="0" preCell="../ePop[0]" postCell="../iPop[0]" preComponent="silent1" postComponent="rs" weight="12"/>
        </continuousProjection>

        <continuousProjection id ="w_ie" presynapticPopulation="iPop" postsynapticPopulation="ePop">
            <continuousConnectionInstanceW id="0" preCell="../iPop[0]" postCell="../ePop[0]" preComponent="silent1" postComponent="rs" weight="-8"/>
        </continuousProjection>

        <continuousProjection id ="w_ii" presynapticPopulation="iPop" postsynapticPopulation="iPop">
            <continuousConnectionInstanceW id="0" preCell="../iPop[0]" postCell="../iPop[0]" preComponent="silent1" postComponent="rs" weight="-3"/>
        </continuousProjection>

        <!-- <explicitInput target="ePopDL[0]" input="rsDL" destination="synapses"/> -->
        <!-- <explicitInput target="iPopDL[0]" input="rsDL" destination="synapses"/> -->

    </network>

   <!-- End of NeuroML2 content -->


    <Simulation id="sim1" length="100ms" step="0.005ms" target="net1">

        <Display id="d1" title="iSyn" timeScale="1s" xmin="-5" xmax="105" ymin="-1" ymax="32">
            <Line id="iSyn_e" quantity="ePop[0]/iSyn" scale="1" color="#ff8888" timeScale="1ms" />
            <Line id="f_e"    quantity="ePop[0]/f" scale="1" color="#ff0000" timeScale="1ms" />
            <Line id="iSyn_i" quantity="iPop[0]/iSyn" scale="1" color="#8888ff" timeScale="1ms" />
            <Line id="f_i"    quantity="iPop[0]/f" scale="1" color="#0000ff" timeScale="1ms" />
        </Display>

        <Display id="d2" title="Rates" timeScale="1s" xmin="-5" xmax="105" ymin="-0.1" ymax="1.2">
            <Line id="r_e" quantity="ePop[0]/r" scale="1" color="#ff0000" timeScale="1ms" />
            <Line id="r_i" quantity="iPop[0]/r" scale="1" color="#8888ff" timeScale="1ms" />
        </Display>
    </Simulation>

</Lems>
