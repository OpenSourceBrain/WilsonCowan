<Lems>

    <Target component="sim1" />

    <!-- Include core NeuroML2 ComponentType definitions -->
    <Include file="Cells.xml" />
    <Include file="Networks.xml" />
    <Include file="Simulation.xml" />

    <Include file="WilsonCowan.xml" />

    <wilsonCowanCell id="E_DL" tau="28ms" R0="0" />
    <wilsonCowanCell id="I_DL" tau="8ms" R0="5"/>

    <!--Dummy synapse which emits no current. Used as presynaptic endpoint for analog synaptic connection.-->
    <silentSynapseDL id="silent1DL"/>

    <rateSynapseDL id="rsDL" />

    <pulseGeneratorDL id="baselineEDL" delay="5ms" duration="150ms" amplitude="8" />
    <pulseGeneratorDL id="baselineIDL" delay="5ms" duration="150ms" amplitude="8" />

    <network id="net1">
        <population id="ePopDL" component="E_DL" size="1" />
        <population id="iPopDL" component="I_DL" size="1" />

        <continuousProjection id ="e_i" presynapticPopulation="ePopDL" postsynapticPopulation="iPopDL">
            <continuousConnectionInstanceW id="0" preCell="../ePopDL[0]" postCell="../iPopDL[0]" preComponent="silent1DL" postComponent="rsDL" weight=".1"/>
        </continuousProjection>

        <continuousProjection id ="i_e" presynapticPopulation="iPopDL" postsynapticPopulation="ePopDL">
            <continuousConnectionInstanceW id="0" preCell="../iPopDL[0]" postCell="../ePopDL[0]" preComponent="silent1DL" postComponent="rsDL" weight=".1"/>
        </continuousProjection>

        <explicitInput target="ePopDL[0]" input="baselineEDL" destination="synapses"/>
        <explicitInput target="iPopDL[0]" input="baselineIDL" destination="synapses"/>

    </network>

    <!-- End of NeuroML2 content -->


    <Simulation id="sim1" length="200ms" step="0.005ms" target="net1">

        <Display id="d1" title="Rates" timeScale="1s" xmin="-20" xmax="222" ymin="-1" ymax="32">
            <Line id="iSyn" quantity="ePopDL[0]/iSyn" scale="1" color="#8888ff" timeScale="1ms" />
            <Line id="f"    quantity="ePopDL[0]/f" scale="1" color="#0000ff" timeScale="1ms" />
            <Line id="iSyn" quantity="iPopDL[0]/iSyn" scale="1" color="#ff8888" timeScale="1ms" />
            <Line id="f"    quantity="iPopDL[0]/f" scale="1" color="#ff0000" timeScale="1ms" />
        </Display>

    </Simulation>


</Lems>
